var Application=function(a){this.textFormat="markdown",this.templates=shortjsdoc,this.data=a,this.maker=new JsDocMaker,this.maker.data=a,this.maker.postProccess(),this.maker.postProccessBinding(),this.maker.postProccessInherited(),window.shortjsdocdata=a,0===jQuery("#mainContainer").size()&&jQuery("body").append('<div id="mainContainer"></div>'),this.$containerEl=jQuery("#mainContainer")};_(Application.prototype).extend({start:function(){this.router=new JsDocRouter(this),Backbone.history.start();var a=Backbone.history.getHash()||"index";Backbone.history.navigate(a,{trigger:!0})},showView:function(a){this.applicationView=this.applicationView||new ApplicationView(this),this.currentView=a,this.$containerEl.empty(),this.applicationView.renderIn(this.$containerEl)},refreshWithNewModel:function(a){this.data=a,Backbone.history.navigate("#index",{trigger:!0}),this.showView(this.currentView)},showErrorView:function(a){this.$containerEl.empty().append("<h1>"+a+"</h1>")}}),Application.startApplication=function(a){var b=new Application(a);b.start()};var JsDocRouter=Backbone.Router.extend({routes:{"class/:class":"showClass","class/:class?:options":"showClass","module/:module":"showModule","method/:method":"showMethod","constructor/:method":"showMethod","property/:property":"showProperty","event/:event":"showEvent",index:"showIndex",modules:"showModules",classes:"showClasses",parse:"showParse",tree:"showTree"},initialize:function(a){this.application=a},showView:function(a,b){b=b||"Resource",a.resourceNotFound?this.application.showErrorView(b+" "+b+" not found!"):this.application.showView(a)},showModule:function(a){var b=new ModuleView(this.application,a);this.showView(b)},parseOptions:function(a){var b={};return _(a.split("&")).each(function(a){var c=a.split("=");c.length>=2&&(b[c[0]]=c[1])}),b},showClass:function(a,b){b=b||"";var c=this.parseOptions(b),d=new ClassView(this.application,a,c);this.showView(d)},showMethod:function(a){var b=new MethodView(this.application,a);this.showView(b)},showProperty:function(a){var b=new PropertyView(this.application,a);this.showView(b)},showEvent:function(a){var b=new PropertyView(this.application,a,!0);this.showView(b)},showModules:function(){var a=new AbstractView(this.application);a.template="modules",this.showView(a)},showClasses:function(){var a=new AbstractView(this.application);a.template="classes",this.showView(a)},showIndex:function(){var a=new IndexView(this.application);this.application.showView(a)},showTree:function(){var a=new TreeView(this.application);this.application.showView(a)},showParse:function(){var a=new ParseView(this.application);this.application.showView(a)}}),AbstractView=Backbone.View.extend({tagName:"div",initialize:function(a){this.application=a},renderIn:function(a){var b=this.application.templates[this.template];if(b){var c=b.apply(this,[]);this.$el.html(c),a.append(this.$el)}return this.afterRender(),this},render:function(){return this.renderIn(jQuery(this.el))},afterRender:function(){this.renderSource()},setTitle:function(a){this.title=a,setTimeout(function(){document.title=a},200)},renderSource_:function(a,b){var c=new SourcesView(this.application,a);c.renderIn(b)},renderSource:function(){this.jsdoc&&(this.renderSource_(this.jsdoc,this.$('[data-type="sources"]')),this.$("pre code").addClass("prettyprint"),"undefined"!=typeof prettyPrint&&prettyPrint("pre code"))}});_(AbstractView.prototype).extend({printTag:function(a,b,c){return c=c||"span",b=b||"",a?"<"+c+(b?' class="'+b+'"':"")+">"+a+"</"+c+">":""},simpleName:function(a){return this.application.maker.simpleName(a)},makeLink:function(a,b){var c=a.annotation+"-name",d=b?'<a class="'+c+'" href="':"";if("method"===a.annotation)d+="#method/"+a.absoluteName;else if("constructor"===a.annotation)d+="#constructor/"+a.absoluteName;else if("property"===a.annotation)d+="#property/"+a.absoluteName;else if("event"===a.annotation)d+="#event/"+a.absoluteName;else if("class"===a.annotation)d+="#class/"+a.absoluteName;else{if("module"!==a.annotation)return"";d+="#module/"+a.name}return d+=b?'">'+a.name+"</a>":""},printLiteralObjectType:function(a){var b=this,c=[];a.buffer.push(this.printType(a.type,!0));var d=1===_(a.type.properties).keys().length&&a.type.properties.prototype;d||("Object"===a.type.name&&(a.buffer.push("{"),_(a.type.properties).each(function(a,d){c.push(d+": "+b.printSingleTypeAsString(a,!0))})),a.buffer.push(c.join(", ")),"Object"===a.type.name&&a.buffer.push("}"))},printType:function(a,b){if(!a||!a.type)return"";var c=this,d=a.type.nativeTypeUrl||"#class/"+a.type.absoluteName,e=a.type.name,f=a.type.nativeTypeUrl?" type external ":" type ",g=a.type.nativeTypeUrl?'<span class="glyphicon glyphicon-share"></span>':"";if(a.buffer.push('<a class="'+f+'" href="'+d+'">'+g+e+"</a>"),a.type.properties&&!b)this.printLiteralObjectType(a);else if(a.type.params){a.buffer.push("&lt;");for(var h=0;h<(a.type.params||[]).length;h++){var i=a.type.params[h];c.printType({type:i,buffer:a.buffer}),h<a.type.params.length-1&&a.buffer.push(",")}a.buffer.push(">")}},printSingleTypeAsString:function(a){var b=[],c={type:a,typeTemplate:this.printType,buffer:b};this.printType(c);var d=b.join("");return d},printTypeAsString:function(a){var b=this;if(_(a).isArray()){var c=[];return _(a).each(function(a){c.push(b.printSingleTypeAsString(a))}),c.join('<span class="type-separator">or</span>')}return this.printSingleTypeAsString(a)},getTextHtml:function(a){if(!a||!a.text)return"";if(a.text_html_app)return a.text_html_app;var b=this,c=a.text,d=this.application.textFormat||"markdown",e=_(a.children).find(function(a){return"html"===a.annotation}),f=_(a.children).find(function(a){return"markdown"===a.annotation});return e&&(d="html"),f&&(d="markdown"),_(a.textMarks).each(function(a,d){c=c.replace(d,b.makeLink(a.binding,!0))}),"markdown"===d&&(c=marked(c)),a.text_html_app=c,c},printMethod:function(a){var b="constructor"===a.annotation,c='<span class="method">',d=b?this.simpleName(a.ownerClass):a.name;return!b&&a.returns&&(c+=this.printTypeAsString(a.returns)+"&nbsp;"),c+='<a href="'+this.makeLink(a)+'">'+d+"</a>",c+"</span>"},getInherited:function(a,b){var c={};return"method"===b&&(c=_(a.methods).clone(),_(c).extend(a.inherited.methods||{})),c},getClassName:function(a){return a.substring(0,a.lastIndexOf("."))},getSimpleName:function(a){return a.substring(a.lastIndexOf(".")+1,a.length)},getModuleClasses:function(a,b){var c=[];return _(b.classes).each(function(b){0===b.absoluteName.indexOf(a)&&c.push(b)}),c}});var IndexView=AbstractView.extend({className:"index",template:"index"}),ClassView=AbstractView.extend({className:"class-view",template:"class",initialize:function(a,b,c){return this.application=a,this.jsdoc=this.application.data.classes[b],this.jsdoc?(this.jsdoc.textHtml=this.getTextHtml(this.jsdoc),this.options=c||{},this.options.inherited=this.options.inherited?parseInt(this.options.inherited,10):0,this.methods=this.jsdoc.methods,this.options.inherited&&(this.methods=_(_(this.methods).clone()).extend(this.jsdoc.inherited.methods)),this.properties=this.jsdoc.properties,void(this.options.inherited&&(this.properties=_(_(this.properties).clone()).extend(this.jsdoc.inherited.properties)))):void(this.resourceNotFound=!0)}}),ModuleView=AbstractView.extend({className:"module",template:"module",initialize:function(a,b){this.application=a,this.jsdoc=this.application.data.modules[b],this.classes=_(_(this.application.data.classes).values()).filter(function(a){return a.module.name===b}),this.jsdoc.textHtml=this.getTextHtml(this.jsdoc)}}),MethodView=AbstractView.extend({className:"method-view",template:"method",initialize:function(a,b){this.application=a;var c=this.getClassName(b),d=this.getSimpleName(b),e=this.application.data.classes[c];return isNaN(parseInt(d,10))?(this.jsdoc=e.methods[d],this.isConstructor=!1):(this.jsdoc=e.constructors[parseInt(d,10)],this.isConstructor=!0),this.jsdoc?(this.jsdoc.textHtml=this.getTextHtml(this.jsdoc),void(this.ownerClass=this.application.data.classes[this.jsdoc.ownerClass])):void(this.resourceNotFound=!0)}}),PropertyView=AbstractView.extend({className:"property-view",template:"property",initialize:function(a,b,c){this.application=a,this.isEvent=c;var d=this.getClassName(b),e=this.getSimpleName(b),f=this.application.data.classes[d];return this.jsdoc=c?f.events[e]:f.properties[e],this.jsdoc?void(this.jsdoc.textHtml=this.getTextHtml(this.jsdoc)):void(this.resourceNotFound=!0)}}),SourcesView=AbstractView.extend({className:"sources",template:"sources",events:{'click [data-type="goto-source"]':"gotoSource"},initialize:function(a,b){this.application=a,this.jsdoc=b,this.allSource=this.application.maker.data.source;var c=400,d=Math.max(0,this.jsdoc.commentRange[0]-c),e=Math.min(this.allSource.length-1,this.jsdoc.commentRange[1]+c);this.sourceSubset=this.allSource.substring(d,e);var f=this.allSource.substring(this.jsdoc.commentRange[0],this.jsdoc.commentRange[1]),g=this.sourceSubset.substring(0,this.sourceSubset.indexOf(f)),h=g.split("\n").length;this.jsdocLineNumber=h-1,this.lineCount=f.split("\n").length},afterRender:function(){"undefined"!=typeof prettyPrint&&prettyPrint()},gotoSource:function(){var a="ol.linenums>li",b=jQuery(jQuery(a).get(this.jsdocLineNumber));b.size()&&(jQuery(window).scrollTop(b.position().top),b.addClass("selectedJsDocLine"));for(var c=0;c<this.lineCount;c++)b=jQuery(jQuery(a).get(this.jsdocLineNumber+c)),b.addClass("selectedJsDocLine")}}),ParseView=AbstractView.extend({className:"parse",events:{'click [data-action="inputcode_doit"]':"inputCodeDoit"},template:"parse",inputCodeDoit:function(){var a=this.$('[data-type="inputcode"]').val(),b=this.application.maker,c=this.$('[data-action="clean"]:checked').val();c&&(this.application.data=b.data={}),b.parseFile(a,"textarea"),b.postProccess(),b.postProccessBinding(),this.application.refreshWithNewModel(b.data)}}),ApplicationView=AbstractView.extend({className:"application-view",template:"application",initialize:function(a){this.application=a},renderIn:function(){AbstractView.prototype.renderIn.apply(this,arguments),this.headerView=this.headerView||new HeaderView(this.application),this.headerView.renderIn(this.$('[data-type="header-container"]')),this.mainView=this.application.currentView,this.mainView.renderIn(this.$('[data-type="main-view-container"]')),document.title=this.title||window.location.href+""}}),HeaderView=AbstractView.extend({className:"header-view",template:"header",initialize:function(a){this.application=a},renderIn:function(){AbstractView.prototype.renderIn.apply(this,arguments),this.installTypeAhead()},installTypeAhead:function(){this.classes=this.application.data.classes,this.modules=this.application.data.modules,this.typeahead=$(".main-header .typeahead1").typeahead({hint:!0,highlight:!0,minLength:1},{name:"jsdoc",displayKey:"value",source:this.substringMatcher()});var a=this;this.typeahead.on("typeahead:selected",function(){a.handleSearchSelection.apply(a,arguments)})},handleSearchSelection:function(a,b){var c=this.makeLink(b.node);Backbone.history.navigate(c,{trigger:!0})},search:function(a){var b=this,c=[],d=new RegExp(a,"i");return _(b.classes).each(function(a){d.test(a.name)&&c.push({value:a.name,node:a}),_(a.methods).each(function(a){d.test(a.name)&&c.push({value:a.name,node:a})})}),_(b.modules).each(function(a){d.test(a.name)&&c.push({value:a.name,node:a})}),c},substringMatcher:function(){var a=this;return function(b,c){var d;d=a.search(b),c(d)}}}),TreeView=AbstractView.extend({className:"tree",template:"tree",events:{'click [data-action="show-tree"]':"showTree",'click [data-action="expand-all"]':"expandAll",'click [data-action="collapse-all"]':"collapseAll"},expandAll:function(){var a=this;this.$(".tree [data-tree-node]").each(function(){a.treeView.expandNode($(this))})},collapseAll:function(){var a=this;this.$(".tree > ul > .tree-node > [data-tree-node]").each(function(){a.treeView.collapseNode($(this))})},renderIn:function(){AbstractView.prototype.renderIn.apply(this,arguments),this.treeModel=this.buildTreeModel(this.application.data),this.treeView=new TreeWidget(this.treeModel),this.treeView.render(".the-tree"),this.treeView.onNodeEvent("click",function(a){alert(a.label+" was clicked")})},buildTreeModel:function(){var a={children:[]},b=this,c=this.application.data;return _(c.modules).each(function(d){a.children.push(b.buildTreeModelForModule(d,c))}),a},buildTreeModelForModule:function(a,b){var c={children:[],label:"Module "+a.name,type:"module"},d=this,e=_(b.classes).filter(function(b){return b.module.name===a.name});return _(e).each(function(a){c.children.push(d.buildTreeModelForClass(a,b))}),c},buildTreeModelForClass:function(a,b){var c={children:[],label:"Class "+a.name,type:"class"},d=this;return _(a.methods).each(function(a){c.children.push(d.buildTreeModelForMethod(a,b))}),c},buildTreeModelForMethod:function(a){var b={children:[],label:"Method "+a.name,type:"method"};return a.returns&&b.children.push({children:[],label:"Returns",type:"returns"}),_(a.params).each(function(){}),b}});!function(){if(!window.TreeWidget){var a=function(a){this.rootNode=a};a.cssOptions={hoverChildren:!1,hoverColor:"red"},a.prototype.render=function(a){return this.parentEl=a,this._renderTree(this.rootNode,a)},a.prototype._renderTree=function(a,b){var c=this,d=this.renderNode({node:a,renderNode:this.renderNode,isRoot:!0});return b&&jQuery(b).empty().append(d),$(".tree li:has(ul)").addClass("parent_li").find(" > span").attr("title","Collapse this branch"),$(".tree li.parent_li > span").on("click",function(a){var b=$(this).parent("li.parent_li").find(" > ul > li");b.is(":visible")?c.collapseNode($(this)):c.expandNode($(this)),a.stopPropagation()}),d},a.prototype.collapseNode=function(a){var b=a.parent("li.parent_li").find(" > ul > li");b.hide("fast"),a.attr("title","Expand this branch").find(" > i").addClass("icon-plus-sign").removeClass("icon-minus-sign")},a.prototype.expandNode=function(a){var b=a.parent("li.parent_li").find(" > ul > li");b.show("fast"),a.attr("title","Collapse this branch").find(" > i").addClass("icon-minus-sign").removeClass("icon-plus-sign")},a.prototype.onNodeEvent=function(a,b){jQuery(this.parentEl).on(a,"li > span",function(){var a=parseInt($(this).data("tree-node-id"));b&&b(this,a)})},window.TreeWidget=a,a.treeNodeTemplate='<% var isRoot = isRoot || false; %><% if(isRoot) { %><div class="tree"><% } else { %><li class="tree-node tree-node-type-<%= node.type %>"><span data-tree-node data-tree-node-id="<%= node.tree_node_id %>"><i class="icon-minus-sign"></i><%= node.label%></span><% } %><% if(node.children) { %><ul><% _(node.children).each(function(child){ %><%= renderNode({node:child, isRoot: false, renderNode: renderNode}) %><% }) %></ul><% } %>'+"<%= isRoot ? '</div>' : '</li>' %>",a.prototype.renderNode=_(a.treeNodeTemplate).template()}}();var FileView=AbstractView.extend({className:"file-view",template:"file",initialize:function(a,b){if(this.application=a,this.jsdoc=this.application.data.files[b],!this.jsdoc)return void(this.resourceNotFound=!0);var c=this.application.data.source.indexOf("@filename",this.jsdoc.commentRange[1]);c=-1===c?this.application.data.source.length:c,this.fileContent=this.application.data.source.substring(this.jsdoc.commentRange[1],c)}});
//# sourceMappingURL=all.min.js.map