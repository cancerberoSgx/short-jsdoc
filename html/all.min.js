var Application=function(e,t){this.textFormat="markdown",this.templates=shortjsdoc,this.config=t,this.data=e,this.maker=new JsDocMaker,this.maker.data=e,this.maker.postProccess(),this.maker.postProccessBinding(),this.maker.postProccessInherited(),window.shortjsdocdata=e,0===jQuery("#mainContainer").size()&&jQuery("body").append('<div id="mainContainer"></div>'),this.$containerEl=jQuery("#mainContainer"),this.$body=jQuery(".main-view-container")};_(Application.prototype).extend({start:function(){this.router=new JsDocRouter(this),Backbone.history.start();var e=Backbone.history.getHash()||"index";Backbone.history.navigate(e,{trigger:!0})},showView:function(e){this.applicationView=this.applicationView||new ApplicationView(this),this.currentView&&this.currentView!==e&&this.currentView.destroy(),this.currentView=e,this.$containerEl.empty(),this.applicationView.renderIn(this.$containerEl),document.title=e.title||document.title},refreshWithNewModel:function(e){this.data=e,Backbone.history.navigate("#index",{trigger:!0}),this.showView(this.currentView)},showErrorView:function(e){var t=new AbstractView;t.application=this,t.template=_.template("<h1>"+e+"</h1>"),this.showView(t)}}),Application.startApplication=function(e,t){new Application(e,t).start()};var JsDocRouter=Backbone.Router.extend({routes:{"class/:class":"showClass","class/:class?:options":"showClass","module/:module":"showModule","module/:module?:options":"showModule","method/:method":"showMethod","constructor/:method":"showMethod","function/:method":"showMethod","property/:property":"showProperty","event/:event":"showEvent","attribute/:attribute":"showAttribute",index:"showIndex","index/?:options":"showIndex",book:"showBook","book/?:options":"showBook",modules:"showModules",classes:"showClasses",parse:"showParse",tree:"showTree",hierarchyTree:"showHierarchyTree","file/:file":"showFile","file/:file?:options":"showFile",search:"doSearch","search/:options":"doSearch","dependencies/:options":"showDependencies",dependencies:"showDependencies"},initialize:function(e){this.application=e},showView:function(e,t){e.resourceNotFound?(t=t||Backbone.history.fragment,this.application.showErrorView("Resource "+t+" not found!")):this.application.showView(e)},showModule:function(e,t){t=t||"";var i=this.parseOptions(t),s=new ModuleView(this.application,e,i);this.showView(s)},parseOptions:function(e){var t={};return _(e.split("&")).each(function(e){var i=e.split("=");i.length>=2&&(t[i[0]]=i[1])}),t},showClass:function(e,t){t=t||"";var i=this.parseOptions(t),s=new ClassView(this.application,e,i);this.showView(s)},showMethod:function(e){var t=new MethodView(this.application,e);this.showView(t)},showProperty:function(e){var t=new PropertyView(this.application,e,"property");this.showView(t)},showEvent:function(e){var t=new PropertyView(this.application,e,"event");this.showView(t)},showAttribute:function(e){var t=new PropertyView(this.application,e,"attribute");this.showView(t)},showModules:function(){var e=new AbstractView(this.application);e.template="modules",this.showView(e)},showClasses:function(){var e=new AbstractView(this.application);e.template="classes",this.showView(e)},doSearch:function(e){var t=this.parseOptions(e||""),i=new SearchView(this.application,t);this.showView(i)},showDependencies:function(e){var t=this.parseOptions(e||""),i=new DependenciesView(this.application,t);this.showView(i)},showIndex:function(e){var t=this.parseOptions(e||""),i=new IndexView(this.application,t);this.application.showView(i)},showBook:function(e){if(confirm("This can take some time for the browser, are you sure you want to continue ? ")){var t=this.parseOptions(e||""),i=new BookView(this.application,t);this.application.showView(i)}else Backbone.history.navigate("index",{trigger:!0})},showTree:function(){var e=new TreeView(this.application);this.application.showView(e)},showHierarchyTree:function(){var e=new HierarchyTreeView(this.application);this.application.showView(e)},showParse:function(){var e=new ParseView(this.application);this.application.showView(e)},showFile:function(e,t){t=t||"";var i=this.parseOptions(t),s=new FileView(this.application,e,i);this.showView(s)}}),AbstractView=Backbone.View.extend({tagName:"div",initialize:function(e){this.application=e},renderIn:function(e){var t=_.isFunction(this.template)?this.template:this.application.templates[this.template];this.options=this.options||{},_.extend(this.options,this.application.config);var i=t.apply(this,[]);this.$el.html(i),e.append(this.$el),this.afterRender()},destroy:function(){this.undelegateEvents()},render:function(){return this.renderIn(jQuery(this.el))},afterRender:function(){this.renderSource()},setTitle:function(e){document.title=e},renderSource_:function(e,t){if(e.commentRange){var i=new SourcesView(this.application,e);i.fileNameUrl=encodeURIComponent(this.jsdoc.fileName),i.renderIn(t)}},renderSource:function(){this.jsdoc&&(this.renderSource_(this.jsdoc,this.$('[data-type="sources"]')),this.$("pre code").addClass("prettyprint"),"undefined"!=typeof prettyPrint&&prettyPrint("pre code"))}});_(AbstractView.prototype).extend({printTag:function(e,t,i){return i=i||"span",t=t||"",e?"<"+i+(t?' class="'+t+'"':"")+">"+e+"</"+i+">":""},simpleName:function(e,t){return this.application.maker.simpleName(e,t)},makeLink:function(e,t,i){var s=e.annotation+"-name",n=t?'<a class="'+s+'" href="':"",a="";if(_.isString(e))a+="#"+e;else if("method"===e.annotation)a+="#method/"+e.absoluteName;else if("constructor"===e.annotation)a+="#constructor/"+e.absoluteName;else if("function"===e.annotation)a+="#function/"+e.absoluteName;else if("property"===e.annotation)a+="#property/"+e.absoluteName;else if("event"===e.annotation)a+="#event/"+e.absoluteName;else if("class"===e.annotation||"interface"===e.annotation)a+="#class/"+e.absoluteName;else{if("module"!==e.annotation)return"";a+="#module/"+e.name}var o=-1===location.hash.indexOf("?")?"":location.hash.split("?")[1];return o=this.paramStringToObject(o),_.isString(i)&&(i=this.paramStringToObject(i)),_.extend(o,i||{}),o=this.paramObjectToString(o),a+=o?"?"+o:"",n+=a+(t?'">'+e.name+"</a>":"")},paramStringToObject:function(e){var t=e.split("&"),i={};return _.each(t,function(e){var t=e.split("=");i[t[0]]=t[1]}),i},paramObjectToString:function(e){var t=[];return _.each(e,function(e,i){i&&t.push(i+"="+e)}),t.join("&")},printLiteralObjectType:function(e){var t=this,i=[];e.buffer.push(this.printType(e.type,!0)),1===_(e.type.properties).keys().length&&e.type.properties.prototype||("Object"===e.type.name&&(e.buffer.push("{"),_(e.type.properties).each(function(e,s){i.push(s+": "+t.printSingleTypeAsString(e,!0))})),e.buffer.push(i.join(", ")),"Object"===e.type.name&&e.buffer.push("}"))},printType:function(e,t){if(!e||!e.type)return"";var i=this,s=e.type.nativeTypeUrl||this.makeLink(e.type),n=e.type.name,a=e.type.nativeTypeUrl?" type external ":" type ",o=e.type.nativeTypeUrl?'<span class="glyphicon glyphicon-share"></span>':"";if(e.buffer.push('<a class="'+a+'" href="'+s+'">'+o+n+"</a>"),e.type.properties&&!t)this.printLiteralObjectType(e);else if(e.type.params&&"function"!==e.type.annotation){e.buffer.push("&lt;");for(var r=0;r<(e.type.params||[]).length;r++){var c=e.type.params[r];i.printType({type:c,buffer:e.buffer}),r<e.type.params.length-1&&e.buffer.push(",")}e.buffer.push(">")}},printSingleTypeAsString:function(e,t){var i=[],s={type:e,typeTemplate:this.printType,buffer:i};return this.printType(s),i.join("")},printTypeAsString:function(e){var t=this;if(_(e).isArray()){var i=[];return _(e).each(function(e){i.push(t.printSingleTypeAsString(e))}),i.join('<span class="type-separator">or</span>')}return this.printSingleTypeAsString(e)},getTextHtml:function(e){if(!e||!e.text)return"";if(e.text_html_app)return e.text_html_app;var t=this,i=e.text,s=this.application.textFormat||"markdown",n=_(e.children).find(function(e){return"html"===e.annotation}),a=_(e.children).find(function(e){return"markdown"===e.annotation});return n&&(s="html"),a&&(s="markdown"),_(e.textMarks).each(function(e,n){"link"===e.name?i="markdown"===s?i.replace(n,"["+e.linkLabel+"]("+e.linkUrl+")"):i.replace(n,'< href="mark.linkUrl" class="text-mark-link">'+e.linkLabel+"</a>"):e.binding&&(i=i.replace(n,t.makeLink(e.binding,!0)))}),"markdown"===s&&(i=marked(i)),e.text_html_app=i,i},printMethod:function(e){var t="constructor"===e.annotation,i='<span class="method">',s=t?this.simpleName(e.ownerClass):e.name;return!t&&e.returns&&(i+=this.printTypeAsString(e.returns)+"&nbsp;"),(i+='<a href="'+this.makeLink(e)+'">'+s+"</a>")+"</span>"},getInherited:function(e,t){var i={};return"method"===t&&(i=_(e.methods).clone(),_(i).extend(e.inherited.methods||{})),i},getClassName:function(e,t){t=t||this.application.data;for(var i=e.split(".");i;){var s=(i=_.initial(i)).join(".");if(t.classes[s])return s}return e.substring(0,e.lastIndexOf("."))},getSimpleName:function(e){var t=this.getClassName(e);return e.substring(t.length+1,e.length)},getModuleClasses:function(e,t){t||(t=this.application.data);var i=[];return _(t.classes).each(function(t){0===t.absoluteName.indexOf(e)&&i.push(t)}),i},parseOptions:function(e,t,i){if(t=t||"&",i=i||"=",!e)return{};var s={};return _(e.split(t)).each(function(e){var t=e.split(i);t.length>=2&&(s[t[0]]=t[1],t[1]&&"0"!==t[1]&&"false"!==t[1]||(s[t[0]]=!1))}),s},getOptionsFromHash:function(e){var t=(e=e||window.location.hash).split("?");return t=t.length<2?"":t[1],this.parseOptions(t)},setOptionsToHash:function(e,t){var i=(e=e||window.location.hash).split("?");return i=i.length<2?"":i[1],i=this.parseOptions(i),_(i).extend(t),e.split("?")[0]+"?"+this.optionsToString(i)},optionsToString:function(e,t,i){t=t||"&",i=i||"=";var s=[];return _(e).each(function(e,t){s.push(t+i+e)}),s.join(t)},propertyIsPublicPredicate:function(e){return _.find(e.children,function(e){return"public"===e.annotation})},isClassPublic:function(e){var t=this.propertyIsPublicPredicate(e);return t=t||_.find(e.methods,this.propertyIsPublicPredicate),t=t||_.find(e.properties,this.propertyIsPublicPredicate),t=t||_.find(e.events,this.propertyIsPublicPredicate),t=t||_.find(e.attributes,this.propertyIsPublicPredicate)},isModulePublic:function(e){var t=this.getModuleClasses(e.name);return _.find(t,_.bind(this.isClassPublic,this))}});var IndexView=AbstractView.extend({className:"index",template:"index",initialize:function(e,t){var i=this;this.application=e,this.options=t||{},this.options.private=this.options.private?parseInt(this.options.private,10):0,this.modules=this.application.data.modules,this.options.private&&(this.modules=_.filter(this.modules,function(e){return i.isModulePublic(e)})),this.classes=this.application.data.classes,this.options.private&&(this.classes=_.filter(this.classes,function(e){return i.isClassPublic(e)}))}}),BookView=AbstractView.extend({className:"book",template:"book",initialize:function(e,t){var i=this;this.application=e,this.options=t||{},this.options.private=this.options.private?parseInt(this.options.private,10):0,this.modules=[],_.each(this.application.data.modules,function(e){i.modules.push(e)}),this.modules=this.modules.sort(function(e,t){return e.name<t.name?0:1}),this.options.private&&(this.modules=_.filter(this.modules,function(e){return i.isModulePublic(e)})),this.classes=this.application.data.classes,this.options.private&&(this.classes=_.filter(this.classes,function(e){return i.isClassPublic(e)})),this.title=this.application.data.projectMetadata.name},afterRender:function(){var e=this;this.$("[data-class]").each(function(){var t=jQuery(this),i=t.data("class"),s=new ClassView(e.application,i,e.options);_.extend(s.options,{dontShowSources:!0,dontShowSidebar:!0,dontShowOptions:!0}),s.resourceNotFound?t.append("Class "+i+" not found!"):s.renderIn(t)})}}),ClassView=AbstractView.extend({className:"class-view",template:"class",events:{'click [data-type="sources-collapse"]':"sourceCollapseHandler"},initialize:function(e,t,i){var s=this;this.application=e,this.jsdoc=this.application.data.classes[t],this.jsdoc?(this.isInterface="interface"===this.jsdoc.annotation,this.jsdoc.textHtml=this.getTextHtml(this.jsdoc),this.options=i||{},this.options.inherited=this.options.inherited?parseInt(this.options.inherited,10):0,this.options.private=this.options.private?parseInt(this.options.private,10):0,this.options.text=this.options.text?parseInt(this.options.text,10):1,this.methods=this.jsdoc.methods||{},this.properties=this.jsdoc.properties||{},this.events_=this.jsdoc.events||{},this.attributes=this.jsdoc.attributes||{},this.options.inherited&&(this.properties=_(_(this.properties).clone()).extend(this.jsdoc.inherited.properties),this.events_=_(_(this.events_).clone()).extend(this.jsdoc.inherited.events),this.attributes=_(_(this.attributes).clone()).extend(this.jsdoc.inherited.attributes),this.methods=_(_(this.methods).clone()).extend(this.jsdoc.inherited.methods)),this.options.private&&(this.properties=_.filter(this.properties,this.propertyIsPublicPredicate),this.methods=_.filter(this.methods,this.propertyIsPublicPredicate),this.events_=_.filter(this.events_,this.propertyIsPublicPredicate),this.attributes=_.filter(this.attributes,this.propertyIsPublicPredicate)),this.hierarchy=this.computeHierarchy(),this.knownSubclasses=this.computeKnownSubclasses(),this.inlineProperties=!0,this.inlineProperties&&(this.inlineMethodViews=[],_(this.methods).each(function(e){var t=new MethodView(s.application,e.absoluteName,!0);t.render(),s.inlineMethodViews.push(t)}),this.inlinePropertyViews=[],_(this.properties).each(function(e){var t=new PropertyView(s.application,e.absoluteName,"property",!0);t.render(),s.inlinePropertyViews.push(t)}),this.inlineEventViews=[],_(this.events_).each(function(e){var t=new PropertyView(s.application,e.absoluteName,"event",!0);t.render(),s.inlineEventViews.push(t)}),this.inlineAttributeViews=[],_(this.attributes).each(function(e){var t=new PropertyView(s.application,e.absoluteName,"attribute",!0);t.render(),s.inlineAttributeViews.push(t)}))):this.resourceNotFound=!0},afterRender:function(){var e=this;AbstractView.prototype.afterRender.apply(this,arguments),_.each(this.inlineMethodViews,function(t){e.$('[data-type="inline-methods"]').append(t.$el)}),_.each(this.inlinePropertyViews,function(t){e.$('[data-type="inline-properties"]').append(t.$el)}),_.each(this.inlineEventViews,function(t){e.$('[data-type="inline-events"]').append(t.$el)}),_.each(this.inlineAttributeViews,function(t){e.$('[data-type="inline-attributes"]').append(t.$el)}),this.buttonCollapsed=this.options.collapseSources,this.sourceCollapseHandler()},sourceCollapseHandler:function(){this.buttonCollapsed?this.$('[data-type="sources"]').hide():this.$('[data-type="sources"]').show(),this.buttonCollapsed=!this.buttonCollapsed},makePartialText:function(e){if(e.text){var t=Math.min(e.text.length,100);return e.text.substring(0,t)+"..."}return""},computeHierarchy:function(){var e=[],t=this.jsdoc;do{if(t&&t.extends&&(e.push(t),t.extends.absoluteName===t.absoluteName))break}while(t=t.extends);return e},computeKnownSubclasses:function(){var e=this,t=[];return _(this.application.data.classes).each(function(i){e.isInterface?_.each(i.implements,function(i){i.extends.absoluteName===e.jsdoc.absoluteName&&t.push(i)}):i.extends.absoluteName===e.jsdoc.absoluteName&&t.push(i)}),t}}),ModuleView=AbstractView.extend({className:"module",template:"module",initialize:function(e,t,i){var s=this;this.application=e,this.jsdoc=this.application.data.modules[t],this.classes=_(_(this.application.data.classes).values()).filter(function(e){return e.module.name===t&&"class"===e.annotation}),this.interfaces=_(_(this.application.data.classes).values()).filter(function(e){return e.module.name===t&&"interface"===e.annotation}),this.options=i||{},this.options.private=this.options.private?parseInt(this.options.private,10):0,this.options.private&&(this.classes=_.filter(this.classes,function(e){return s.isClassPublic(e)})),this.jsdoc.textHtml=this.getTextHtml(this.jsdoc)}}),MethodView=AbstractView.extend({className:"method-view",template:"method",initialize:function(e,t,i){if(this.application=e,this.asChildView=i,0!==Backbone.history.fragment.indexOf("function")){var s=this.getClassName(t),n=this.getSimpleName(t),a=this.application.data.classes[s];if(this.ownerModule=a.module.name,isNaN(parseInt(n,10))?(this.jsdoc=a.methods[n],this.isConstructor=!1):(this.jsdoc=a.constructors[parseInt(n,10)],this.isConstructor=!0),!this.jsdoc)return void(this.resourceNotFound=!0);this.jsdoc.textHtml=this.getTextHtml(this.jsdoc),this.ownerClass=this.application.data.classes[this.jsdoc.ownerClass]}else if(0===Backbone.history.fragment.indexOf("function")){var o=t.split(".")[0];this.ownerModule=this.application.data.modules[o];var r=_.find(this.ownerModule.functions,function(e){return e.absoluteName===t});if(this.jsdoc=r,this.jsdoc.textHtml=this.getTextHtml(this.jsdoc),!this.jsdoc)return void(this.resourceNotFound=!0);this.isFunction=!0}}}),PropertyView=AbstractView.extend({className:"property-view",template:"property",initialize:function(e,t,i,s){this.application=e,this.asChildView=s;var n={event:"Event",property:"Property",attribute:"Attribute"};this.propertyLabel=n[i];var a=this.getClassName(t),o=this.getSimpleName(t),r=this.application.data.classes[a];this.ownerModule=r.module.name;var c={event:"events",property:"properties",attribute:"attributes"};this.jsdoc=r[c[i]][o],this.jsdoc?this.jsdoc.textHtml=this.getTextHtml(this.jsdoc):this.resourceNotFound=!0}}),SourcesView=AbstractView.extend({className:"sources",template:"sources",events:{'click [data-type="goto-source"]':"gotoSource"},initialize:function(e,t){this.application=e,this.jsdoc=t,this.allSource=this.application.maker.data.source;var i=Math.max(0,this.jsdoc.commentRange[0]-400),s=Math.min(this.allSource.length-1,this.jsdoc.commentRange[1]+400);this.sourceSubset=this.allSource.substring(i,s);var n=this.allSource.substring(this.jsdoc.commentRange[0],this.jsdoc.commentRange[1]),a=this.sourceSubset.substring(0,this.sourceSubset.indexOf(n)).split("\n").length;this.jsdocLineNumber=a-1,this.lineCount=n.split("\n").length},afterRender:function(){"undefined"!=typeof prettyPrint&&prettyPrint()},gotoSource:function(){var e=jQuery(jQuery("ol.linenums>li").get(this.jsdocLineNumber));e.size()&&(jQuery(window).scrollTop(e.position().top),e.addClass("selectedJsDocLine"));for(var t=0;t<this.lineCount;t++)(e=jQuery(jQuery("ol.linenums>li").get(this.jsdocLineNumber+t))).addClass("selectedJsDocLine")}}),ParseView=AbstractView.extend({className:"parse",events:{'click [data-action="inputcode_doit"]':"inputCodeDoit"},template:"parse",inputCodeDoit:function(){var e=this.$('[data-type="inputcode"]').val(),t=this.application.maker;this.$('[data-action="clean"]:checked').val()&&(this.application.data=t.data={}),t.parseFile(e,"textarea"),t.postProccess(),t.postProccessBinding(),this.application.refreshWithNewModel(t.data)}}),ApplicationView=AbstractView.extend({className:"application-view",template:"application",initialize:function(e){this.application=e},renderIn:function(e){AbstractView.prototype.renderIn.apply(this,arguments),this.headerView=this.headerView||new HeaderView(this.application),this.headerView.renderIn(this.$('[data-type="header-container"]')),this.mainView=this.application.currentView,this.mainView.renderIn(this.$('[data-type="main-view-container"]')),document.title=this.title||window.location.href+""}}),HeaderView=AbstractView.extend({className:"header-view",template:"header",initialize:function(e){this.application=e},renderIn:function(){AbstractView.prototype.renderIn.apply(this,arguments),this.installTypeAhead()},installTypeAhead:function(){this.classes=this.application.data.classes,this.modules=this.application.data.modules,this.typeahead=$(".main-header .typeahead1").typeahead({hint:!0,highlight:!0,minLength:1},{name:"jsdoc",displayKey:"value",source:this.substringMatcher(),templates:{empty:'<div class="empty-message">Sorry, nothing found.</div>',suggestion:this.application.templates.typeaheadSuggestion}});var e=this;this.typeahead.on("typeahead:selected",function(){e.handleSearchSelection.apply(e,arguments)}),jQuery(window).width()<400&&jQuery(".tt-dropdown-menu").css({width:jQuery(window).width()+"px"})},handleSearchSelection:function(e,t,i){var s=this.makeLink(t.node);Backbone.history.navigate(s,{trigger:!0})},search:function(e){var t=this,i=[],s=new RegExp(e,"i");return _(t.classes).each(function(e){s.test(e.name)&&i.push({value:e.name,node:e}),_(e.methods).each(function(e){s.test(e.name)&&i.push({value:e.name,node:e})})}),_(t.modules).each(function(e){s.test(e.name)&&i.push({value:e.name,node:e})}),i},substringMatcher:function(){var e=this;return function(t,i){i(e.search(t))}}}),FileView=AbstractView.extend({className:"file-view",template:"file",events:{'click [data-action="donwload"]':"download"},initialize:function(e,t,i){if(this.fileName=decodeURIComponent(t),this.application=e,this.jsdoc=this.application.data.files[t],this.jsdoc){var s=this.application.data.source.indexOf("@filename",this.jsdoc.commentRange[1]);s=-1===s?this.application.data.source.length:s,this.fileContent=this.application.data.source.substring(this.jsdoc.commentRange[1],s)}else this.resourceNotFound=!0},afterRender:function(){"undefined"!=typeof prettyPrint&&prettyPrint()},download:function(){var e=this.fileName.split("/");e=e[e.length-1];var t=document.createElement("a"),i=new Blob([this.fileContent],{type:"text/javascript"});t.href=window.URL.createObjectURL(i),t.download=e,t.click()}}),SearchView=AbstractView.extend({className:"search-view",template:"search",events:{'click [data-action="search"]':"searchActionHandler"},initialize:function(e,t){this.application=e,this.jsdoc=this.application.data;var i=this;this.query=t,this.search(function(e){i.results=e,i.render()})},formToJson:function(e){var t=jQuery(e).serialize().split("&"),i={};return _(t).each(function(e){var t=e.split("=");i[t[0]]=t[1]}),i},searchActionHandler:function(e){var t=this.$('[data-type="search-form"]').serialize();Backbone.history.navigate("search?"+t,{trigger:!0}),e.preventDefault()},search:function(e){if(this.query.keywords){var t=this,i={},s=t.query.keywords.toLowerCase();this.application.maker.recurseAST(function(e){},function(e,n){var a=e.absoluteName?e.absoluteName:e.name;if(a&&n&&(a=a.toLowerCase())&&-1!==a.indexOf(s)){var o,r,c;"param"===n.annotation?(c=n.parentNode.absoluteName+"."+n.name,o="parameter '"+n.name+"' of method '"+n.parentNode.absoluteName+"'",r=t.makeLink(n.parentNode)):(c=n.absoluteName,o=n.annotation+" '"+n.absoluteName+"'",r=t.makeLink(n)),i[c]={label:o,url:r}}},function(){var t=[];_(i).each(function(e){t.push(e)}),e(t)})}}}),AbstractTreeView=AbstractView.extend({expandAll:function(){var e=this;this.$(".tree [data-tree-node]").each(function(){e.treeView.expandNode($(this))})},collapseAll:function(){var e=this;this.$(".tree > ul > .tree-node > [data-tree-node]").each(function(){e.treeView.collapseNode($(this))})}});!function(){if(!window.TreeWidget){var e=function(e){this.rootNode=e};e.cssOptions={hoverChildren:!1,hoverColor:"red"},e.prototype.render=function(e){return this.parentEl=e,this._renderTree(this.rootNode,e)},e.prototype._renderTree=function(e,t){var i=this,s=this.renderNode({node:e,renderNode:this.renderNode,isRoot:!0});return t&&jQuery(t).empty().append(s),$(".tree li:has(ul)").addClass("parent_li").find(" > span").attr("title","Collapse this branch"),$(".tree li.parent_li > span").on("click",function(e){$(this).parent("li.parent_li").find(" > ul > li").is(":visible")?i.collapseNode($(this)):i.expandNode($(this)),e.stopPropagation()}),s},e.prototype.collapseNode=function(e){e.parent("li.parent_li").find(" > ul > li").hide("fast"),e.attr("title","Expand this branch").find(" > i").addClass("glyphicon-plus-sign").removeClass("glyphicon-minus-sign")},e.prototype.expandNode=function(e){e.parent("li.parent_li").find(" > ul > li").show("fast"),e.attr("title","Collapse this branch").find(" > i").addClass("glyphicon-minus-sign").removeClass("glyphicon-plus-sign")},e.prototype.onNodeEvent=function(e,t){jQuery(this.parentEl).on(e,"li > span",function(){var e=parseInt($(this).data("tree-node-id"));t&&t(this,e)})},window.TreeWidget=e,e.treeNodeTemplate='<% var isRoot = isRoot || false; %><% if(isRoot) { %><div class="tree"><% } else { %><li class="tree-node tree-node-type-<%= node.type %>"><span data-tree-node data-tree-node-id="<%= node.tree_node_id %>"><i class="glyphicon glyphicon-minus-sign"></i><%= node.label%></span><% } %><% if(node.children) { %><ul><% _(node.children).each(function(child){ %><%= renderNode({node:child, isRoot: false, renderNode: renderNode}) %><% }) %></ul><% } %>'+"<%= isRoot ? '</div>' : '</li>' %>",e.prototype.renderNode=_(e.treeNodeTemplate).template()}}();var TreeView=AbstractTreeView.extend({className:"tree",template:"tree",events:{'click [data-action="show-tree"]':"showTree",'click [data-action="expand-all"]':"expandAll",'click [data-action="collapse-all"]':"collapseAll"},renderIn:function(){AbstractView.prototype.renderIn.apply(this,arguments),this.treeModel=this.buildTreeModel(this.application.data),this.treeView=new TreeWidget(this.treeModel),this.treeView.render(".the-tree"),this.treeView.onNodeEvent("click",function(e){alert(e.label+" was clicked")})},buildTreeModel:function(){var e={children:[]},t=this,i=this.application.data;return _(i.modules).each(function(s){e.children.push(t.buildTreeModelForModule(s,i))}),e},buildTreeModelForModule:function(e,t){var i={children:[],label:"Module "+this.makeLink(e,!0),type:"module"},s=this,n=_(t.classes).filter(function(t){return t.module.name===e.name});return _(n).each(function(e){i.children.push(s.buildTreeModelForClass(e,t))}),i},buildTreeModelForClass:function(e,t){var i={children:[],label:"Class "+this.makeLink(e,!0),type:"class"},s=this;return _(e.methods).each(function(e){i.children.push(s.buildTreeModelForMethod(e,t))}),_(e.properties).each(function(e){i.children.push(s.buildTreeModelForProperty(e,t,"Property"))}),_(e.events).each(function(e){i.children.push(s.buildTreeModelForProperty(e,t,"Event"))}),i},buildTreeModelForProperty:function(e,t,i){return{children:[],label:i+" "+this.makeLink(e,!0),type:"method"}},buildTreeModelForMethod:function(e,t){return{children:[],label:"Method "+this.makeLink(e,!0),type:"method"}}}),HierarchyTreeView=AbstractTreeView.extend({className:"hierarchy-tree",template:"hierarchytree",events:{'click [data-action="show-tree"]':"showTree",'click [data-action="expand-all"]':"expandAll",'click [data-action="collapse-all"]':"collapseAll"},renderIn:function(){AbstractView.prototype.renderIn.apply(this,arguments);var e=this.application.data.classes["javascript.Object"];e||(e={name:"Object"});this.classesExtendsFrom(e);this.treeModel=this.buildTreeModel(e),this.treeModel={label:"Something",children:[this.treeModel]},this.treeView=new TreeWidget(this.treeModel),this.treeView.render(".the-tree"),this.treeView.onNodeEvent("click",function(e){alert(e.label+" was clicked")})},classesExtendsFrom:function(e){var t=[];return _(this.application.data.classes).each(function(i){i.extends&&e&&(i.extends.absoluteName?i.extends.absoluteName===e.absoluteName&&i.absoluteName!==i.extends.absoluteName&&t.push(i):i.extends.name&&i.name!==i.extends.name&&i.extends.name===e.name&&t.push(i))}),t},buildTreeModel:function(e){if(!e)return[];var t={children:[],label:'<a href="'+this.makeLink(e)+'">'+(e.absoluteName||e.name)+"</a>"},i=this,s=i.classesExtendsFrom(e);return _(s).each(function(e){t.children.push(i.buildTreeModel(e))}),t}}),DependenciesView=AbstractView.extend({className:"dependencies",template:"dependencies",events:{'click [data-type="includeExtends"]':"includeExtends",'click [data-type="includeNativeClasses"]':"includeNativeClasses"},initialize:function(e,t){this.application=e,this.options=t||{},this.options.includeExtends=this.options.includeExtends&&"0"!==this.options.includeExtends,this.options.includeNativeClasses=this.options.includeNativeClasses&&"0"!==this.options.includeNativeClasses,this.ignoreClasses=this.options.includeNativeClasses?[]:["javascript.String","javascript.Object","javascript.Function","javascript.Any","javascript.Number","javascript.Boolean","javascript.Array"]},renderIn:function(){var e=this;AbstractView.prototype.renderIn.apply(this,arguments),toast("lib/vis/dist/vis.min.js","lib/vis/dist/vis.min.css",function(){e.doTheGraph()})},includeExtends:function(){var e=this.$('[data-type="includeExtends"]').is(":checked"),t=this.getOptionsFromHash();t.includeExtends=e?"1":"0";var i="dependencies?"+this.optionsToString(t);Backbone.history.navigate(i,{trigger:!0})},includeNativeClasses:function(){var e=this.$('[data-type="includeNativeClasses"]').is(":checked"),t=this.getOptionsFromHash();t.includeNativeClasses=e?"1":"0";var i="dependencies?"+this.optionsToString(t);Backbone.history.navigate(i,{trigger:!0})},doTheGraph:function(){this.$(".loading-message").show();var e={ignoreClasses:this.ignoreClasses,includeExtends:this.options.includeExtends};new this.application.maker.tools.DependencyTool(this.application.maker,e).calculateClassDependencies();var t=[],i=[],s=1,n={};_(this.application.data.classes).each(function(e){var i={id:s,label:e.name};t.push(i),n[e.absoluteName]=i,s++}),_(this.application.data.classes).each(function(e){_(e.dependencies.classes).each(function(t){n[e.absoluteName]&&n[t.absoluteName]&&i.push({from:n[e.absoluteName].id,to:n[t.absoluteName].id})})});var a=this.$('[data-type="dependency-graph"]').get(0),o={nodes:t,edges:i},r={nodes:{shape:"box"},edges:{style:"arrow"}};new vis.Network(a,o,r);this.$(".loading-message").hide()}});
//# sourceMappingURL=all.min.js.map